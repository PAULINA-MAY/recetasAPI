generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model Comentario {
  comentarioId          Int               @id(map: "PK__Comentar__3966EC043C714905") @default(autoincrement())
  FKUsuarioId           Int
  RecetaIngredienteIdFK Int
  comentario            String?           @db.Text
  fechaDeCreacion       DateTime?         @default(now(), map: "DF__Comentari__fecha__628FA481") @db.DateTime
  Usuario               Usuario           @relation(fields: [FKUsuarioId], references: [usuarioId], onUpdate: NoAction, map: "FK__Comentari__FKUsu__6383C8BA")
  RecetaIngrediente     RecetaIngrediente @relation(fields: [RecetaIngredienteIdFK], references: [recetaIngredienteId], onUpdate: NoAction, map: "FK__Comentari__Recet__6477ECF3")
}

model Imagen {
  imagenId        Int       @id(map: "PK__Imagen__494B286B16F8F3A2") @default(autoincrement())
  usuarioFKId     Int
  recetaIdFK      Int
  pasoIdFK        Int
  url             String    @db.Text
  tipo            String    @db.VarChar(100)
  fechaDeCreacion DateTime? @default(now(), map: "DF__Imagen__fechaDeC__5CD6CB2B") @db.DateTime
  Paso            Paso      @relation(fields: [pasoIdFK], references: [PasoId], onUpdate: NoAction, map: "FK__Imagen__pasoIdFK__5FB337D6")
  Receta          Receta    @relation(fields: [recetaIdFK], references: [recetaId], onUpdate: NoAction, map: "FK__Imagen__recetaId__5EBF139D")
  Usuario         Usuario   @relation(fields: [usuarioFKId], references: [usuarioId], onUpdate: NoAction, map: "FK__Imagen__usuarioF__5DCAEF64")
}

model Ingrediente {
  ingredienteId   Int       @id(map: "PK__Ingredie__BD695E80D93FC817") @default(autoincrement())
  nombre          String    @db.VarChar(150)
  cantidad        Decimal?  @db.Decimal(6, 2)
  unidad_medida   String?   @db.VarChar(20)
  fechaDeCreacion DateTime? @default(now(), map: "DF__Ingredien__fecha__5070F446") @db.DateTime
}

model Paso {
  PasoId                Int               @id(map: "PK__Paso__C36D566AEDB1D202") @default(autoincrement())
  recetaIngredienteIdFK Int
  numeroPaso            Int
  descripcion           String            @db.Text
  Imagen                Imagen[]
  RecetaIngrediente     RecetaIngrediente @relation(fields: [recetaIngredienteIdFK], references: [recetaIngredienteId], onUpdate: NoAction, map: "FK__Paso__recetaIngr__59FA5E80")
}

model Puntuacion {
  puntuacionId          Int               @id(map: "PK__Puntuaci__A03018C2699D9C90") @default(autoincrement())
  IdUsuarioFK           Int
  RecetaIngredienteFKId Int
  puntuacion            Decimal?          @db.Decimal(2, 1)
  fechaDeCreacion       DateTime?         @default(now(), map: "DF__Puntuacio__fecha__6754599E") @db.DateTime
  Usuario               Usuario           @relation(fields: [IdUsuarioFK], references: [usuarioId], onUpdate: NoAction, map: "FK__Puntuacio__IdUsu__68487DD7")
  RecetaIngrediente     RecetaIngrediente @relation(fields: [RecetaIngredienteFKId], references: [recetaIngredienteId], onUpdate: NoAction, map: "FK__Puntuacio__Recet__693CA210")
}

model Receta {
  recetaId          Int       @id(map: "PK__Receta__B9B1CB3DD4EEEB7F") @default(autoincrement())
  usuarioIdFK       Int
  descripcion       String    @db.Text
  tiempoPreparacion DateTime  @db.Time
  porcion           Int
  fechaDeCreacion   DateTime? @default(now(), map: "DF__Receta__fechaDeC__534D60F1") @db.DateTime
  Imagen            Imagen[]
  Usuario           Usuario   @relation(fields: [usuarioIdFK], references: [usuarioId], onUpdate: NoAction, map: "FK__Receta__usuarioI__5441852A")
}

model RecetaIngrediente {
  recetaIngredienteId Int          @id(map: "PK__RecetaIn__F3B157761F8985F1") @default(autoincrement())
  idRecetaFK          Int
  idIngredienteFK     Int
  fechaDeCreacion     DateTime?    @default(now(), map: "DF__RecetaIng__fecha__571DF1D5") @db.DateTime
  Comentario          Comentario[]
  Paso                Paso[]
  Puntuacion          Puntuacion[]
}

model Rol {
  rolId           Int       @id(map: "PK__Rol__5402363404DC0F4D") @default(autoincrement())
  tipo            String    @unique @db.VarChar(150)
  fechaDeCreacion DateTime? @default(now(), map: "DF__Rol__fechaDeCrea__49C3F6B7") @db.DateTime
  Usuario         Usuario[]
}

model Usuario {
  usuarioId       Int          @id(map: "PK__Usuario__A5B1AB8E7D9176BF") @default(autoincrement())
  rolIdFK         Int
  nombreCompleto  String       @unique @db.VarChar(150)
  correo          String       @db.VarChar(255)
  contrase_a      String       @map("contrase√±a") @db.VarChar(255)
  fechaDeCreacion DateTime?    @default(now(), map: "DF__Usuario__fechaDe__4CA06362") @db.DateTime
  Comentario      Comentario[]
  Imagen          Imagen[]
  Puntuacion      Puntuacion[]
  Receta          Receta[]
  Rol             Rol          @relation(fields: [rolIdFK], references: [rolId], onUpdate: NoAction, map: "FK__Usuario__rolIdFK__4D94879B")
}
